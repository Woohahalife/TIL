# 0313 TIL

---
# PR(Pull Request) Builder
PR 과정에 CI를 수행하면 자동화된 빌드 / 검증을 수행할 수 있다. 요청된 변경이 머지되기 전 자동 검증이 된다면 에러가 공유 브랜치에 병합되는 것을 막을 수 있으므로 공유 브랜치의 품질을 조금 더 보장할 수 있을 것이다.

### PR Builder - PR 등록 / PR에 commit -> push 시 빌드 수행

Jenkins PR Builder는 깃허브와의 상호 호출을 통해 CI 과정을 좀 더 쉽게 구성하도록 돕는다.

![[Pasted image 20240315101539.png]]

- GitHub PR이 등록되거나 commit이 push되면 해당 commit HASH를 Jenkins로 전달한다.
- Jenkins는 이 호출을 받아서 빌드를 수행한 후 빌드 검증 결과를 GitHub PR로 전달한다.
- 빌드 검증 실패시 GitHub는 해당 PR을 Merge를 할 수 없도록  Disable처리를 한다.

PR마다 팀원들이 붙어서 코드 리뷰를 할 테지만 그것만으로는 코드 품질을 보장하기에 부족한 상황도 있을 것이다. PR Builder를 통한 자동화 테스트 검증이라도 있다면 개발 과정에서의 코드 품질을 좀 더 보장할 수 있지 않을까 ㅎ(코드 빌드가 깨지거나 테스트 동작 X 지정한 코드 스타일에 어긋난 코드가 흘러들어오는 것 방지)

### PR Builder - PR 등록 / PR에 comment 입력시 빌드 -> 배포 수행

PR에서 테스트가 깨진 원인이 소스 이외 다른 부분에서 문제가 있는 경우, PR빌더를 통해 테스트만 따로 재수행할 수 있다.

![[Pasted image 20240315101749.png]]

- PR에 코멘트가 입력되면 해당 코멘트와 HASH를 Jenkins로 전달
- Jenkins는 코멘트를 인지해 적절한 빌드/배포를 수행
- 빌드 실행 결과를 PR로 전달

### 설정 가이드라인

- PR 빌더를 통한 빌드 / 배포는 빠르게 수행할 수 있어야함
- PR 빌더를 통해서는 주로 빌드 / 테스트만 수행
- 명시적인 코멘트 입력을 통해 재빌드 / 테스트도 수행
- PR에 피드백으로 등록한 링크를 통해 해당 Jenkins 빌드 결과에 접근 가능해야함(상호 링크 연결)